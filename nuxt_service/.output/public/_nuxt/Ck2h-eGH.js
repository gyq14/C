import{d as F,a9 as L,u as M,r as c,aa as z,a0 as T,o as a,b as n,e,t as l,V as Y,g as v,S as w,dS as S,F as p,Y as b,l as m,_ as $}from"./BKjTAV26.js";import{u as q,S as I}from"./DpdxWg4J.js";const G={class:"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md mt-10"},H={class:"flex justify-between items-center mb-4 border-b pb-4"},J={class:"text-2xl font-semibold"},K={class:"mb-4"},O={class:"mb-4"},Q={class:"text-gray-700 mt-2"},W={class:"mb-4"},X={class:"mt-2"},Z={key:0,class:"break-words"},ee={key:1},te=["value"],se={class:"mb-4"},oe={class:"mt-2"},ae={key:0,class:"break-words"},ne={key:1},le=["value"],ue={class:"mb-4"},re={key:0,class:"mb-4"},ie={class:"list-disc ml-5 mt-2 text-blue-600"},de={href:"#",class:"hover:underline"},ce={key:1,class:"flex justify-between items-center mt-4 mb-4"},ve={class:"flex items-center"},pe=F({__name:"bind",props:{routetype:{}},setup(C){var f,y,h,k;const j=C,g=L();g.params.type;const D=parseInt(g.params.id),P=q(),V=M(),t=c(),_=["中车戚墅堰机车车辆工艺研究所股份有限公司"],r=c(((f=t.value)==null?void 0:f.responsibleId)===0?"":String((y=t.value)==null?void 0:y.responsibleId)),i=c(((h=t.value)==null?void 0:h.approverId)===0?"":String((k=t.value)==null?void 0:k.approverId)),A=z();function B(d){return new Date(d).toLocaleString()}function R(d){var o;const s=d.target.files;if(s&&s.length>0){const E=s[0].name;(o=t.value)==null||o.attachments.push(E)}}function N(){t.value&&(t.value.status=I.InProgress)}function U(){t.value&&(t.value.status=I.Rejected)}T(()=>{t.value=P.getSubtask(D),t.value&&(r.value=t.value.responsibleId===0?"":"中车戚墅堰机车车辆工艺研究所股份有限公司",i.value=t.value.approverId===0?"":V.getUserById(t.value.approverId))});const u=d=>{switch(d){case"InProgress":return"进行中";case"AwaitingApproval":return"待审批";case"Completed":return"已完成";case"Pending":return"待处理";case"Rejected":return"已驳回";case"Delayed":return"已延期";case"Expired":default:return"未知状态"}};function x(){A.push(`${j.routetype}`)}return(d,s)=>(a(),n("div",G,[e("div",H,[e("h2",J,l(t.value.title),1),e("span",{class:Y([{"bg-green-200 text-green-800":u(t.value.status)==="进行中","bg-blue-200 text-blue-800":u(t.value.status)==="已完成","bg-gray-200 text-gray-800":u(t.value.status)!=="进行中"&&u(t.value.status)!=="已完成"},"text-sm px-3 py-1 rounded-full"])},l(u(t.value.status)),3)]),e("div",K,[s[2]||(s[2]=e("strong",null,"版本:",-1)),v(" "+l(t.value.version),1)]),e("div",O,[s[3]||(s[3]=e("strong",null,"项目描述:",-1)),e("p",Q,l(t.value.description),1)]),e("div",W,[s[4]||(s[4]=e("strong",null,"供应商:",-1)),e("div",X,[r.value&&r.value!=="0"?(a(),n("p",Z,l(r.value),1)):(a(),n("p",ee,[w(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.value=o),class:"block bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm"},[(a(),n(p,null,b(_,o=>e("option",{key:o,value:o},l(o),9,te)),64))],512),[[S,r.value]])]))])]),e("div",se,[s[5]||(s[5]=e("strong",null,"审批人:",-1)),e("div",oe,[i.value&&i.value!=="0"?(a(),n("p",ae,l(i.value),1)):(a(),n("p",ne,[w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),class:"block bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm"},[(a(),n(p,null,b(_,o=>e("option",{key:o,value:o},l(o),9,le)),64))],512),[[S,i.value]])]))])]),e("div",ue,[e("div",null,[s[6]||(s[6]=e("strong",null,"创建时间:",-1)),v(" "+l(t.value.createdAt),1)]),e("div",null,[s[7]||(s[7]=e("strong",null,"截止时间:",-1)),v(" "+l(B(t.value.dueDate)),1)])]),t.value.attachments&&t.value.attachments.length>0?(a(),n("div",re,[s[8]||(s[8]=e("strong",null,"附件:",-1)),e("ul",ie,[(a(!0),n(p,null,b(t.value.attachments,o=>(a(),n("li",{key:o},[e("a",de,l(o),1)]))),128))])])):m("",!0),u(t.value.status)==="待处理"?(a(),n("div",ce,[e("div",ve,[s[9]||(s[9]=e("strong",{class:"mr-2"},"上传附件:",-1)),e("input",{type:"file",onChange:R,class:"mr-4"},null,32)]),e("div",{class:"flex space-x-4"},[e("button",{onClick:N,class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 审批 "),e("button",{onClick:U,class:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 拒绝 "),e("button",{onClick:x,class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 取消 ")])])):m("",!0),u(t.value.status)!=="待处理"?(a(),n("button",{key:2,onClick:x,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4 transition ease-in-out duration-200"}," 返回 ")):m("",!0)]))}}),ge=$(pe,[["__scopeId","data-v-513e09be"]]);export{ge as _};
