import{E as R}from"./DP4sTjb7.js";import{E as $}from"./4iV_JLK1.js";import{E as O}from"./B92SaHDk.js";import{d as Q,r as u,i as x,o as A,b as H,e as p,f as t,w as i,t as P,F as W,h as j,g as v,m as G,n as J,_ as K}from"./A2Vocqfh.js";import{a as M,E as X}from"./DOj0AJDD.js";import{E as Y}from"./BzJ8IFzI.js";import"./u5bu2pBJ.js";import"./DI9FKtlJ.js";import"./QOar1N-T.js";import"./3_7Tw8cr.js";import"./JQDFjasu.js";import"./ezOoaqoY.js";import"./DnsuNe2f.js";import"./s_UcGjT4.js";import"./Bcm3GxWR.js";import"./Dhj5io09.js";const Z={style:{display:"flex"}},ee={style:{width:"20%","margin-right":"20px"}},le={style:{width:"80%"}},te={style:{display:"flex","align-items":"center","margin-bottom":"20px"}},oe={style:{"margin-left":"20px"}},ae={slot:"footer",class:"dialog-footer"},ne=Q({__name:"User",setup(re){const y={backgroundColor:"#f0f0f0",color:"#000000",textAlign:"center",fontWeight:"bold",fontSize:"14px",padding:"12px",borderRadius:"4px 4px 0 0",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)"},b=u([{name:"张建  ",account:"zhaoliu",contact:"13800000004",email:"zhaoliu@example.com",signature:"",department:"制动组",role:"系统管理员"},{name:"刘艳 ",account:"qianqi",contact:"13800000005",email:"qianqi@example.com",signature:"",department:"设计组",role:"成员"},{name:"刘翔行",account:"sunba",contact:"13800000006",email:"sunba@example.com",signature:"",department:"",role:"部长"}]),C=a=>{console.log("查看用户详情:",a)},U=a=>{console.log("删除用户:",a)},E=a=>{console.log("双击行查看用户详情:",a)},_=u(""),h=u(""),V=x(()=>{const a={},e={};b.value.forEach(l=>{(l.role==="系统管理员"||l.role==="部长")&&(a[l.role]||(a[l.role]=[]),a[l.role].push({label:l.name})),e[l.department]||(e[l.department]=[]),e[l.department].push({label:l.name})});const r=[];for(const l in a)r.push({label:l,children:a[l]});for(const l in e)r.push({label:l,children:e[l]});return r}),k=u({children:"children",label:"label"}),c=u(""),D=x(()=>{const a=_.value.toLowerCase();if(!a)return V.value;const e=r=>r.map(l=>({...l,children:l.children?e(l.children):void 0})).filter(l=>l.label.toLowerCase().includes(a)||l.children&&l.children.length>0);return e(V.value)}),T=()=>{},L=a=>{c.value=a.label},w=x(()=>{var r;let a=b.value;if(c.value){const l=V.value.find(d=>d.label===c.value),g=((r=l==null?void 0:l.children)==null?void 0:r.map(d=>d.label))||[];a=b.value.filter(d=>g.length>0?g.includes(d.name):d.department===c.value||d.role===c.value)}const e=h.value.toLowerCase();return e?a.filter(l=>l.name.toLowerCase().includes(e)||l.account.toLowerCase().includes(e)||l.contact.toLowerCase().includes(e)||l.email.toLowerCase().includes(e)):a}),f=u(!1),n=u({name:"",account:"",contact:"",email:"",signature:"",department:"",role:""}),F=()=>{f.value=!0},N=()=>{n.value={name:"",account:"",contact:"",email:"",signature:"",department:"",role:""}},z=()=>{console.log("保存新用户:",n.value),b.value.push(n.value),f.value=!1};return(a,e)=>{const r=R,l=$,g=O,d=j,s=X,B=M,m=G,S=J,q=Y;return A(),H(W,null,[p("div",Z,[p("div",ee,[t(r,{placeholder:"搜索成员",modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),"prefix-icon":"el-icon-search",clearable:"",onInput:T,class:"mb-2"},null,8,["modelValue"]),t(l,{data:D.value,props:k.value,onNodeClick:L,class:"member-tree"},null,8,["data","props"])]),t(g,{direction:"vertical",style:{height:"880px"}}),p("div",le,[p("div",te,[t(d,{type:"primary",onClick:F},{default:i(()=>e[11]||(e[11]=[v("新建")])),_:1}),t(r,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=o=>h.value=o),"suffix-icon":"el-icon-search",placeholder:"搜索成员",clearable:"",style:{width:"300px","margin-left":"10px"}},null,8,["modelValue"]),p("div",oe,"合计 "+P(w.value.length)+" 条",1)]),t(B,{data:w.value,border:"",style:{width:"100%"},"header-cell-style":y,onRowDblclick:E},{default:i(()=>[t(s,{prop:"name",label:"姓名","min-width":"10%"}),t(s,{prop:"account",label:"账号","min-width":"10%"}),t(s,{prop:"contact",label:"联系方式","min-width":"10%"}),t(s,{prop:"email",label:"电子邮箱","min-width":"15%"}),t(s,{prop:"signature",label:"电子签名","min-width":"15%"}),t(s,{prop:"department",label:"部门","min-width":"10%"}),t(s,{prop:"role",label:"角色","min-width":"10%"}),t(s,{prop:"operation",fixed:"right",label:"操作","min-width":"10%"},{default:i(o=>[t(d,{link:"",type:"primary",size:"small",onClick:I=>C(o.row)},{default:i(()=>e[12]||(e[12]=[v("查看")])),_:2},1032,["onClick"]),t(d,{link:"",type:"danger",size:"small",onClick:I=>U(o.row)},{default:i(()=>e[13]||(e[13]=[v("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),t(q,{title:"新建用户",modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=o=>f.value=o),width:"50%",onClose:N},{default:i(()=>[t(S,{model:n.value,ref:"userForm","label-width":"100px",style:{padding:"20px"}},{default:i(()=>[t(m,{label:"姓名"},{default:i(()=>[t(r,{modelValue:n.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.name=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),t(m,{label:"账号"},{default:i(()=>[t(r,{modelValue:n.value.account,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.account=o),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),t(m,{label:"联系方式"},{default:i(()=>[t(r,{modelValue:n.value.contact,"onUpdate:modelValue":e[4]||(e[4]=o=>n.value.contact=o),placeholder:"请输入联系方式"},null,8,["modelValue"])]),_:1}),t(m,{label:"电子邮箱"},{default:i(()=>[t(r,{modelValue:n.value.email,"onUpdate:modelValue":e[5]||(e[5]=o=>n.value.email=o),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1}),t(m,{label:"电子签名"},{default:i(()=>[t(r,{modelValue:n.value.signature,"onUpdate:modelValue":e[6]||(e[6]=o=>n.value.signature=o),placeholder:"请输入电子签名"},null,8,["modelValue"])]),_:1}),t(m,{label:"部门"},{default:i(()=>[t(r,{modelValue:n.value.department,"onUpdate:modelValue":e[7]||(e[7]=o=>n.value.department=o),placeholder:"请输入部门"},null,8,["modelValue"])]),_:1}),t(m,{label:"角色"},{default:i(()=>[t(r,{modelValue:n.value.role,"onUpdate:modelValue":e[8]||(e[8]=o=>n.value.role=o),placeholder:"请输入角色"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),p("span",ae,[t(d,{onClick:e[9]||(e[9]=o=>f.value=!1)},{default:i(()=>e[14]||(e[14]=[v("取 消")])),_:1}),t(d,{type:"primary",onClick:z},{default:i(()=>e[15]||(e[15]=[v("确 定")])),_:1})])]),_:1},8,["modelValue"])],64)}}}),ye=K(ne,[["__scopeId","data-v-060549c6"]]);export{ye as default};
