import{d as A,ea as F,r as p,p as L,y as M,o as n,b as l,e,t as a,b8 as U,g as b,b5 as w,eb as j,F as m,v as g,k as r,u as C,_ as z}from"./A2Vocqfh.js";import{u as E}from"./Bd-TCTuH.js";const T={class:"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md mt-10"},$={class:"flex justify-between items-center mb-4 border-b pb-4"},q={class:"text-2xl font-semibold"},G={class:"mb-4"},H={class:"mb-4"},J={class:"text-gray-700 mt-2"},K={class:"mb-4"},O={key:0,class:"break-words"},Q=["value"],W={class:"mb-4"},X={key:0,class:"break-words"},Y=["value"],Z={class:"mb-4"},ee={key:0,class:"mb-4"},te={class:"list-disc ml-5 mt-2 text-blue-600"},se={href:"#",class:"hover:underline"},oe={key:1,class:"flex justify-between items-center mt-4 mb-4"},ne={key:0,class:"flex items-center"},le={key:1,class:"flex items-center"},ae={key:2,class:"flex justify-between items-center mt-4 mb-4"},ue={class:"flex items-center"},re=A({__name:"tode2",props:{routetype:{}},setup(P){var h,k;const D=P,f=F();f.params.type;const v=parseInt(f.params.id),V=E(),t=p(),x=["刘艳","张建","刘翔行","王新"],i=p(((h=t.value)==null?void 0:h.responsible[0])||""),d=p(((k=t.value)==null?void 0:k.approver[0])||""),B=L();function y(u){return new Date(u).toLocaleString()}function _(u){var o;const s=u.target.files;if(s&&s.length>0){const R=s[0].name;(o=t.value)==null||o.attachments.push(R)}}function I(){t.value&&(t.value.status="待审批"),c()}function N(){var u;t.value&&(t.value.status="已批准"),((u=t.value)==null?void 0:u.id)==2&&(t.value.status="已完成")}function S(){t.value&&(t.value.status="已拒绝")}M(()=>{t.value=V.getProjectbyId(v),t.value&&(i.value=t.value.responsible[0]||"",d.value=t.value.approver[0]||"")});function c(){B.push(`${D.routetype}`)}return(u,s)=>(n(),l("div",T,[e("div",$,[e("h2",q,a(t.value.name),1),e("span",{class:U([{"bg-green-200 text-green-800":t.value.status==="进行中","bg-blue-200 text-blue-800":t.value.status==="已完成","bg-gray-200 text-gray-800":t.value.status!=="进行中"&&t.value.status!=="已完成"},"text-sm px-3 py-1 rounded-full"])},a(t.value.status),3)]),e("div",G,[s[2]||(s[2]=e("strong",null,"版本:",-1)),b(" "+a(t.value.version),1)]),e("div",H,[s[3]||(s[3]=e("strong",null,"项目描述:",-1)),e("p",J,a(t.value.description),1)]),e("div",K,[s[4]||(s[4]=e("strong",null,"负责人:",-1)),i.value?(n(),l("p",O,a(i.value),1)):w((n(),l("select",{key:2,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),class:"block mt-2 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm"},[(n(),l(m,null,g(x,o=>e("option",{key:o,value:o},a(o),9,Q)),64))],512)),[[j,i.value]])]),e("div",W,[s[5]||(s[5]=e("strong",null,"审批人:",-1)),d.value?(n(),l("p",X,a(d.value),1)):w((n(),l("select",{key:2,"onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o),class:"block mt-2 bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm"},[(n(),l(m,null,g(x,o=>e("option",{key:o,value:o},a(o),9,Y)),64))],512)),[[j,d.value]])]),e("div",Z,[e("div",null,[s[6]||(s[6]=e("strong",null,"创建时间:",-1)),b(" "+a(y(t.value.time)),1)]),e("div",null,[s[7]||(s[7]=e("strong",null,"截止时间:",-1)),b(" "+a(y(t.value.deadline)),1)])]),t.value.attachments&&t.value.attachments.length>0?(n(),l("div",ee,[s[8]||(s[8]=e("strong",null,"附件:",-1)),e("ul",te,[(n(!0),l(m,null,g(t.value.attachments,o=>(n(),l("li",{key:o},[e("a",se,a(o),1)]))),128))])])):r("",!0),t.value.status==="待审批"?(n(),l("div",oe,[C(v)===1?(n(),l("div",ne,[s[9]||(s[9]=e("strong",{class:"mr-2"},"上传附件:",-1)),e("input",{type:"file",onChange:_,class:"mr-4"},null,32)])):r("",!0),C(v)===2?(n(),l("div",le)):r("",!0),e("div",{class:"flex space-x-4"},[e("button",{onClick:N,class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 审批 "),e("button",{onClick:S,class:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 拒绝 "),e("button",{onClick:c,class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 取消 ")])])):r("",!0),t.value.status==="进行中"?(n(),l("div",ae,[e("div",ue,[s[10]||(s[10]=e("strong",{class:"mr-2"},"上传附件:",-1)),e("input",{type:"file",onChange:_,class:"mr-4"},null,32)]),e("div",{class:"flex space-x-4"},[e("button",{onClick:I,class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 提交 "),e("button",{onClick:c,class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition ease-in-out duration-200"}," 取消 ")])])):r("",!0),t.value.status!=="待审批"&&t.value.status!=="进行中"?(n(),l("button",{key:3,onClick:c,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4 transition ease-in-out duration-200"}," 返回 ")):r("",!0)]))}}),ce=z(re,[["__scopeId","data-v-9984d688"]]);export{ce as _};
