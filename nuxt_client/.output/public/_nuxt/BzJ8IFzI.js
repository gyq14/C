import{y as te,bx as de,B as fe,d2 as _,d0 as ve,d3 as me,aX as Z,i as k,bv as se,cU as J,aK as j,cR as ye,b0 as pe,d4 as be,a$ as ge,cP as H,bz as G,bB as V,d as X,f as R,aZ as h,D as he,be as Ce,bf as we,aY as Q,o as z,b as K,e as U,b8 as w,u as o,t as Ee,w as E,c as q,b7 as ke,b1 as Me,k as x,aL as ne,aW as le,d5 as Te,aO as Be,d6 as Se,bl as ee,r as O,d7 as De,d8 as Ie,b3 as Le,ba as Pe,d9 as oe,cV as Oe,da as Ae,a_ as Fe,b5 as $e,b6 as ze,cK as Ne,db as Ye,cT as Re,bh as Xe}from"./A2Vocqfh.js";import{P as W}from"./s_UcGjT4.js";import{F as Ue,i as Ve,d as He,e as Ke}from"./ezOoaqoY.js";import{c as We}from"./Bcm3GxWR.js";import{U as ae}from"./DP4sTjb7.js";import{g as _e}from"./Dhj5io09.js";const je=(e,s,n,d)=>{let l={offsetX:0,offsetY:0};const r=c=>{const y=c.clientX,g=c.clientY,{offsetX:b,offsetY:v}=l,m=e.value.getBoundingClientRect(),C=m.left,u=m.top,A=m.width,M=m.height,N=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,F=-C+b,T=-u+v,B=N-C-A+b,S=Y-u-M+v,D=t=>{let L=b+t.clientX-y,$=v+t.clientY-g;d!=null&&d.value||(L=Math.min(Math.max(L,F),B),$=Math.min(Math.max($,T),S)),l={offsetX:L,offsetY:$},e.value&&(e.value.style.transform=`translate(${_(L)}, ${_($)})`)},I=()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",D),document.addEventListener("mouseup",I)},i=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",r)},f=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",r)},a=()=>{l={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return te(()=>{de(()=>{n.value?i():f()})}),fe(()=>{f()}),{resetPosition:a}},qe=(e,s={})=>{ve(e)||me("[useLockscreen]","You need to pass a ref param to this function");const n=s.ns||Z("popup"),d=k(()=>n.bm("parent","hidden"));if(!se||J(document.body,d.value))return;let l=0,r=!1,i="0";const f=()=>{setTimeout(()=>{typeof document>"u"||(ge(document==null?void 0:document.body,d.value),r&&document&&(document.body.style.width=i))},200)};j(e,a=>{if(!a){f();return}r=!J(document.body,d.value),r&&(i=document.body.style.width),l=_e(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,y=ye(document.body,"overflowY");l>0&&(c||y==="scroll")&&r&&(document.body.style.width=`calc(100% - ${l}px)`),pe(document.body,d.value)}),be(()=>f())},ie=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let s=!1,n=!1;return{onClick:i=>{s&&n&&e(i),s=n=!1},onMousedown:i=>{s=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},xe=G({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},Ge="overlay";var Je=X({name:"ElOverlay",props:xe,emits:Ze,setup(e,{slots:s,emit:n}){const d=Z(Ge),l=a=>{n("click",a)},{onClick:r,onMousedown:i,onMouseup:f}=ie(e.customMaskEvent?void 0:l);return()=>e.mask?R("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:i,onMouseup:f},[h(s,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):he("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(s,"default")])}});const Qe=Je,re=Symbol("dialogInjectionKey"),ce=G({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ce},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),eo={close:()=>!0},oo=X({name:"ElDialogContent"}),to=X({...oo,props:ce,emits:eo,setup(e,{expose:s}){const n=e,{t:d}=we(),{Close:l}=Te,{dialogRef:r,headerRef:i,bodyId:f,ns:a,style:c}=Q(re),{focusTrapRef:y}=Q(Ue),g=k(()=>[a.b(),a.is("fullscreen",n.fullscreen),a.is("draggable",n.draggable),a.is("align-center",n.alignCenter),{[a.m("center")]:n.center}]),b=We(y,r),v=k(()=>n.draggable),m=k(()=>n.overflow),{resetPosition:C}=je(r,i,v,m);return s({resetPosition:C}),(u,A)=>(z(),K("div",{ref:o(b),class:w(o(g)),style:ne(o(c)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:i,class:w([o(a).e("header"),{"show-close":u.showClose}])},[h(u.$slots,"header",{},()=>[U("span",{role:"heading","aria-level":u.ariaLevel,class:w(o(a).e("title"))},Ee(u.title),11,["aria-level"])]),u.showClose?(z(),K("button",{key:0,"aria-label":o(d)("el.dialog.close"),class:w(o(a).e("headerbtn")),type:"button",onClick:M=>u.$emit("close")},[R(o(Me),{class:w(o(a).e("close"))},{default:E(()=>[(z(),q(ke(u.closeIcon||o(l))))]),_:1},8,["class"])],10,["aria-label","onClick"])):x("v-if",!0)],2),U("div",{id:o(f),class:w(o(a).e("body"))},[h(u.$slots,"default")],10,["id"]),u.$slots.footer?(z(),K("footer",{key:0,class:w(o(a).e("footer"))},[h(u.$slots,"footer")],2)):x("v-if",!0)],6))}});var so=le(to,[["__file","dialog-content.vue"]]);const no=G({...ce,appendToBody:Boolean,appendTo:{type:V([String,Object]),default:"body"},beforeClose:{type:V(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),lo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Be(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ao=(e,s)=>{var n;const l=Pe().emit,{nextZIndex:r}=Se();let i="";const f=ee(),a=ee(),c=O(!1),y=O(!1),g=O(!1),b=O((n=e.zIndex)!=null?n:r());let v,m;const C=De("namespace",Ie),u=k(()=>{const p={},P=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(p[`${P}-margin-top`]=e.top),e.width&&(p[`${P}-width`]=_(e.width))),p}),A=k(()=>e.alignCenter?{display:"flex"}:{});function M(){l("opened")}function N(){l("closed"),l(ae,!1),e.destroyOnClose&&(g.value=!1)}function Y(){l("close")}function F(){m==null||m(),v==null||v(),e.openDelay&&e.openDelay>0?{stop:v}=oe(()=>D(),e.openDelay):D()}function T(){v==null||v(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=oe(()=>I(),e.closeDelay):I()}function B(){function p(P){P||(y.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(p):T()}function S(){e.closeOnClickModal&&B()}function D(){se&&(c.value=!0)}function I(){c.value=!1}function t(){l("openAutoFocus")}function L(){l("closeAutoFocus")}function $(p){var P;((P=p.detail)==null?void 0:P.focusReason)==="pointer"&&p.preventDefault()}e.lockScroll&&qe(c);function ue(){e.closeOnPressEscape&&B()}return j(()=>e.modelValue,p=>{p?(y.value=!1,F(),g.value=!0,b.value=Ve(e.zIndex)?r():b.value++,Le(()=>{l("open"),s.value&&(s.value.scrollTop=0)})):c.value&&T()}),j(()=>e.fullscreen,p=>{s.value&&(p?(i=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=i)}),te(()=>{e.modelValue&&(c.value=!0,g.value=!0,F())}),{afterEnter:M,afterLeave:N,beforeLeave:Y,handleClose:B,onModalClick:S,close:T,doClose:I,onOpenAutoFocus:t,onCloseAutoFocus:L,onCloseRequested:ue,onFocusoutPrevented:$,titleId:f,bodyId:a,closed:y,style:u,overlayDialogStyle:A,rendered:g,visible:c,zIndex:b}},io=X({name:"ElDialog",inheritAttrs:!1}),ro=X({...io,props:no,emits:lo,setup(e,{expose:s}){const n=e,d=Oe();Ae({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},k(()=>!!d.title));const l=Z("dialog"),r=O(),i=O(),f=O(),{visible:a,titleId:c,bodyId:y,style:g,overlayDialogStyle:b,rendered:v,zIndex:m,afterEnter:C,afterLeave:u,beforeLeave:A,handleClose:M,onModalClick:N,onOpenAutoFocus:Y,onCloseAutoFocus:F,onCloseRequested:T,onFocusoutPrevented:B}=ao(n,r);Fe(re,{dialogRef:r,headerRef:i,bodyId:y,ns:l,rendered:v,style:g});const S=ie(N),D=k(()=>n.draggable&&!n.fullscreen);return s({visible:a,dialogContentRef:f,resetPosition:()=>{var t;(t=f.value)==null||t.resetPosition()}}),(t,L)=>(z(),q(o(Ke),{to:t.appendTo,disabled:t.appendTo!=="body"?!1:!t.appendToBody},{default:E(()=>[R(Re,{name:"dialog-fade",onAfterEnter:o(C),onAfterLeave:o(u),onBeforeLeave:o(A),persisted:""},{default:E(()=>[$e(R(o(Qe),{"custom-mask-event":"",mask:t.modal,"overlay-class":t.modalClass,"z-index":o(m)},{default:E(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:o(c),"aria-describedby":o(y),class:w(`${o(l).namespace.value}-overlay-dialog`),style:ne(o(b)),onClick:o(S).onClick,onMousedown:o(S).onMousedown,onMouseup:o(S).onMouseup},[R(o(He),{loop:"",trapped:o(a),"focus-start-el":"container",onFocusAfterTrapped:o(Y),onFocusAfterReleased:o(F),onFocusoutPrevented:o(B),onReleaseRequested:o(T)},{default:E(()=>[o(v)?(z(),q(so,Ne({key:0,ref_key:"dialogContentRef",ref:f},t.$attrs,{center:t.center,"align-center":t.alignCenter,"close-icon":t.closeIcon,draggable:o(D),overflow:t.overflow,fullscreen:t.fullscreen,"show-close":t.showClose,title:t.title,"aria-level":t.headerAriaLevel,onClose:o(M)}),Ye({header:E(()=>[t.$slots.title?h(t.$slots,"title",{key:1}):h(t.$slots,"header",{key:0,close:o(M),titleId:o(c),titleClass:o(l).e("title")})]),default:E(()=>[h(t.$slots,"default")]),_:2},[t.$slots.footer?{name:"footer",fn:E(()=>[h(t.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ze,o(a)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var co=le(ro,[["__file","dialog.vue"]]);const bo=Xe(co);export{bo as E};
